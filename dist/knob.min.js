(()=>{"use strict";function e(e,t,n,r){t.forEach((t=>{!function(e,t,n,r){e.addEventListener(t,n,r)}(e,t,n,r)}))}function t(e,t,n,r){t.forEach((t=>{e.removeEventListener(t,n,r)}))}function n(e,t,n){return e.dispatchEvent(new CustomEvent(t,n))}const r=function(e,t){return customElements.get(t)?Promise.reject(new Error(`Already defined <${t}>`)):(customElements.define(t,e),customElements.whenDefined(t))},s=function(e,t){return e instanceof DOMPoint?DOMPoint.fromPoint(e):new DOMPoint(e,t)},o=s;var i;!function(e){e.spinStart="spinstart",e.spinning="spinning",e.spinEnd="spinend",e.change="change"}(i||(i={}));const a=i,c=function(e){if(e instanceof TouchEvent){const{touches:t}=e,n=t.item(0),{clientX:r=0,clientY:o=0}=n??{};return s(r,o)}const{clientX:t,clientY:n}=e;return s(t,n)},{PI:d,hypot:l,asin:u}=Math,h=o(0,0);function m(e,t=h){return e.y<t.y?e.x>t.x?1:2:e.x<t.x?3:e.y>t.y?4:1}function g(e,t=h,n=m(e,t)){const r=e.x-t.x,s=e.y-t.y,o=l(r,s);switch(n){default:case 1:return u(-s/o);case 2:return u(-r/o);case 3:return u(s/o);case 4:return u(r/o)}}const b=["mousedown","touchstart"],p=["mousemove","touchmove"],f=["mouseup","touchend"];function x(r){const{degree:s}=this;if(!n(this,a.spinStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{degree:s,lastDegree:s,offsetDegree:0}}))return;const{top:i,right:l,bottom:u,left:h}=this.getBoundingClientRect(),b=o((l+h)/2,(i+u)/2),x=c(r),v=m(x,b),y=g(x,b,v);let k=0,w=v,E=y;const A=e=>{const t=c(e),r=m(t,b),o=g(t,b,r),i=function(e,t,n,r){switch(n-e){default:case 0:return t-r;case-3:case 1:return t-r-d/2;case-1:case 3:return t-r+d/2;case-2:case 2:{const e=t+d-r;return e>d?2*d-e:e}}}(w,E,r,o)/d*180,{degree:l}=this;k+=i;const u=s+k,h=n(this,a.spinning,{bubbles:!0,cancelable:!0,composed:!0,detail:{degree:u,lastDegree:l,offsetDegree:k}});w=r,E=o,h&&(this.degree=u)},M=()=>{const{degree:e}=this;t(document,p,A),t(document,f,M),n(this,a.spinEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{degree:e,lastDegree:s,offsetDegree:k}})};r.preventDefault(),e(document,p,A),e(document,f,M)}var v;!function(e){e.disabled="disabled",e.degree="degree",e.min="min",e.max="max"}(v||(v={}));const y=v;var k;!function(e){e.degree="--degree"}(k||(k={}));const w=k,{isNaN:E}=globalThis,A=document.createElement("template"),M={[y.degree]:0,[y.min]:-1/0,[y.max]:1/0};A.innerHTML=`\n  <style>\n    :host {\n      position: relative;\n      touch-action: none;\n      display: inline-block;\n      vertical-align: text-bottom;\n    }\n\n    knob {\n      transition: inherit;\n      transform: rotate(var(${w.degree}));\n      width: 100%;\n      height: 100%;\n      display: block;\n    }\n  </style>\n  <knob>\n    <slot></slot>\n    <cover>\n      <slot name="pointer"></slot>\n    </cover>\n  </knob>\n`;class D extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.append(A.content.cloneNode(!0)),this.knobElement=e.querySelector("knob"),D.observedAttributes.forEach((e=>{this.attributeChangedCallback(e)}))}static get observedAttributes(){return[y.disabled,y.min,y.max,y.degree]}attributeChangedCallback(e){switch(e){default:break;case y.disabled:this.disabled=this.hasAttribute(y.disabled);break;case y.min:{const e=Number(this.getAttribute(y.min)??M[y.min]);this.min=e,this.degree=Math.max(e,this.degree);break}case y.max:{const e=Number(this.getAttribute(y.max)??M[y.max]);this.max=e,this.degree=Math.min(e,this.degree);break}case y.degree:this.degree=Number(this.getAttribute(y.degree)??M[y.degree])}}get disabled(){return this.hasAttribute(y.disabled)}set disabled(n){n?(t(this,b,x),this.setAttribute(y.disabled,"")):(e(this,b,x),this.removeAttribute(y.disabled))}get min(){const e=this.getAttribute(y.min);return null===e?M[y.min]:Number(e)}set min(e){if(E(e))throw new TypeError(`Invalid min degree: ${e}`);if(e!==this.min&&(this.setAttribute(y.min,`${e}`),this.max<e))throw new RangeError("Setting min degree that is greater than max degree might cause spinning error")}get max(){const e=this.getAttribute(y.max);return null===e?M[y.max]:Number(e)}set max(e){if(E(e))throw new TypeError(`Invalid max degree: ${e}`);if(e!==this.max&&(this.setAttribute(y.max,`${e}`),this.min>e))throw new RangeError("Setting max degree that is less than min degree might cause spinning error")}get degree(){const e=this.getAttribute(y.degree);return null===e?M[y.degree]:Number(e)}set degree(e){if(E(e))throw new TypeError(`Invalid degree: ${e}`);const{degree:t,min:r,max:s}=this,o=Math.max(r,Math.min(e,s));o!==t&&(this.knobElement.style.setProperty(w.degree,`${o}deg`),this.setAttribute(y.degree,`${o}`),n(this,a.change,{bubbles:!0,cancelable:!1,composed:!0,detail:{degree:o,lastDegree:t,offsetDegree:o-t}}))}get value(){return this.degree}set value(e){this.degree=e}}r(D,"knob-base");const N=D,T=document.createElement("template");T.innerHTML="\n  <style>\n    :host {\n      --size: 80px;\n      \n      width: var(--size);\n      height: var(--size);\n    }\n\n    knob {\n      position: relative;\n      border-radius: 50%;\n      box-sizing: border-box;\n      border: 1px solid currentColor;\n      background: #f3f3f3;\n      color: #aaa;\n      overflow: hidden;\n    }\n\n    knob:hover,\n    knob:active {\n      color: #888;\n      background: #eee;\n    }\n\n    cover {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      display: flex;\n      z-index: 1;\n    }\n\n    slot[name=pointer] {\n      margin: 0 auto;\n      display: block;\n    }\n\n    ::slotted([slot=pointer]) {\n      display: none;\n    }\n\n    knob > slot {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      display: block;\n    }\n  </style>\n";const C=class extends N{constructor(){super(),this.shadowRoot.append(T.content.cloneNode(!0))}},$=document.createElement("template");$.innerHTML="\n  <style>\n    slot[name=pointer] {\n      margin-top: 5%;\n      border-radius: 50%;\n      width: 10%;\n      height: 10%;\n      background: currentColor;\n    }\n  </style>\n";r(class extends C{constructor(){super(),this.shadowRoot.append($.content.cloneNode(!0))}},"knob-dot");const L=document.createElement("template");L.innerHTML="\n  <style>\n    slot[name=pointer] {\n      transform: rotate(45deg);\n      margin-top: 5%;\n      width: 10%;\n      height: 10%;\n      background-image: linear-gradient(\n        135deg,\n        currentColor 50%,\n        transparent 50%\n      );\n    }\n  </style>\n";r(class extends C{constructor(){super(),this.shadowRoot.append(L.content.cloneNode(!0))}},"knob-triangle");const P=document.createElement("template");P.innerHTML="\n  <style>\n    slot[name=pointer] {\n      width: 3%;\n      height: 15%;\n      background: currentColor;\n    }\n  </style>\n";r(class extends C{constructor(){super(),this.shadowRoot.append(P.content.cloneNode(!0))}},"knob-line")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVNhLFFBQVFDLFdBQVUsTUMzRG5DZCxFQUFXTixTQUFTTyxjQUFjLFlBRXhDRCxFQUFTSSxVQUFhLHVMQXFCdEI4QixFQVRBLGNBQXNCQyxFQUNwQjVCLGNBQ0VDLFFBRUM5QyxLQUFLK0MsV0FDSEcsT0FBT1osRUFBU2EsUUFBUUMsV0FBVSxNQXBCeEIsWUEwQmpCLE1DekJNZCxFQUFXTixTQUFTTyxjQUFjLFlBRXhDRCxFQUFTSSxVQUFhLHFSQXlCdEI4QixFQVRBLGNBQTJCQyxFQUN6QjVCLGNBQ0VDLFFBRUM5QyxLQUFLK0MsV0FDSEcsT0FBT1osRUFBU2EsUUFBUUMsV0FBVSxNQXhCeEIsaUJBOEJqQixNQzdCTWQsRUFBV04sU0FBU08sY0FBYyxZQUV4Q0QsRUFBU0ksVUFBYSxvSUFtQnRCOEIsRUFUQSxjQUF1QkMsRUFDckI1QixjQUNFQyxRQUVDOUMsS0FBSytDLFdBQ0hHLE9BQU9aLEVBQVNhLFFBQVFDLFdBQVUsTUFsQnhCLGMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbGYyY29tL2tub2IuanMvLi9zcmMvdXRpbHMvZXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL0BsZjJjb20va25vYi5qcy8uL3NyYy91dGlscy9yZWdpc3RlckVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9rbm9iLmpzLy4vc3JjL3R5cGVzL1BvaW50LnRzIiwid2VicGFjazovL0BsZjJjb20va25vYi5qcy8uL3NyYy92YWx1ZXMvZXZlbnQudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9rbm9iLmpzLy4vc3JjL3V0aWxzL2dldEV2ZW50WFkudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9rbm9iLmpzLy4vc3JjL3V0aWxzL3JhZGl1c0FuZERlZ3JlZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2tub2IuanMvLi9zcmMvdXRpbHMvc3Bpbkxpc3RlbmVyLnRzIiwid2VicGFjazovL0BsZjJjb20va25vYi5qcy8uL3NyYy92YWx1ZXMvYXR0cmlidXRlLnRzIiwid2VicGFjazovL0BsZjJjb20va25vYi5qcy8uL3NyYy92YWx1ZXMvc3R5bGUudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9rbm9iLmpzLy4vc3JjL2tub2IudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9rbm9iLmpzLy4vc3JjL2tub2JzL2Jhc2ljLnRzIiwid2VicGFjazovL0BsZjJjb20va25vYi5qcy8uL3NyYy9rbm9icy9kb3QudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9rbm9iLmpzLy4vc3JjL2tub2JzL3RyaWFuZ2xlLnRzIiwid2VicGFjazovL0BsZjJjb20va25vYi5qcy8uL3NyYy9rbm9icy9saW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgRXZlbnRIb2xkZXIgPSBIVE1MRWxlbWVudCB8IERvY3VtZW50IHwgV2luZG93O1xudHlwZSBFdmVudExpc3RlbmVyID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgRXZlbnRMaXN0ZW5lck9wdGlvbnMge1xuICBjYXB0dXJlPzogYm9vbGVhbjtcbiAgb25jZT86IGJvb2xlYW47XG4gIHBhc3NpdmU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEFkZHMgZXZlbnQgb2YgdHlwZSB0byBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZTogc3RyaW5nLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHJlZi5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBBZGRzIGV2ZW50cyBvZiB0eXBlcyB0byBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGVzOiBzdHJpbmdbXSxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICB0eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihyZWYsIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBldmVudCBvZiB0eXBlIGZyb20gZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGU6IHN0cmluZyxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICByZWYucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBldmVudHMgb2YgdHlwZXMgZnJvbSBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGVzOiBzdHJpbmdbXSxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICB0eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgcmVmLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuaW50ZXJmYWNlIEN1c3RvbUV2ZW50SW5pdDxUPiB7XG4gIGRldGFpbD86IFQ7XG4gIGJ1YmJsZXM/OiBib29sZWFuO1xuICBjYW5jZWxhYmxlPzogYm9vbGVhbjtcbiAgY29tcG9zZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRyaWdnZXJzIGV2ZW50IGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZSBldmVudCBpcyBjYW5jZWxsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQ8VD4oXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGU6IHN0cmluZyxcbiAgb3B0aW9ucz86IEN1c3RvbUV2ZW50SW5pdDxUPixcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gcmVmLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHR5cGUsIG9wdGlvbnMpKTtcbn1cblxuLyoqXG4gKiBUcmlnZ2VycyBldmVudHMgYW5kIHJldHVybnMgZmFsc2UgaWYgYW55IG9mIHRoZSBldmVudCBpc1xuICogY2FuY2VsbGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpZ2dlckV2ZW50czxUPihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZXM6IHN0cmluZ1tdLFxuICBvcHRpb25zPzogQ3VzdG9tRXZlbnRJbml0PFQ+LFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlcy5ldmVyeSgodHlwZSkgPT4gdHJpZ2dlckV2ZW50KHJlZiwgdHlwZSwgb3B0aW9ucykpO1xufVxuIiwiLyoqXG4gKiBSZWdpc3RlcnMgS25vYiBlbGVtZW50LlxuICovXG5mdW5jdGlvbiByZWdpc3RlckVsZW1lbnQoXG4gIE5vZGU6IHR5cGVvZiBIVE1MRWxlbWVudCxcbiAgbm9kZU5hbWU6IHN0cmluZyxcbik6IFJldHVyblR5cGU8dHlwZW9mIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkPiB7XG4gIGlmIChjdXN0b21FbGVtZW50cy5nZXQobm9kZU5hbWUpKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgbmV3IEVycm9yKGBBbHJlYWR5IGRlZmluZWQgPCR7bm9kZU5hbWV9PmApLFxuICAgICk7XG4gIH1cblxuICBjdXN0b21FbGVtZW50cy5kZWZpbmUobm9kZU5hbWUsIE5vZGUpO1xuXG4gIHJldHVybiBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZChub2RlTmFtZSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlZ2lzdGVyRWxlbWVudDtcbiIsImludGVyZmFjZSBDcmVhdGVQb2ludCB7XG4gICh4OiBudW1iZXIsIHk6IG51bWJlcik6IERPTVBvaW50O1xuICAocG9pbnQ6IERPTVBvaW50KTogRE9NUG9pbnQ7XG59XG5cbi8qKlxuICogUmV0dXJucyBwb2ludCBvYmplY3QgZnJvbSBhIHBvaW50IG9yICh4LCB5KS5cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVBvaW50OiBDcmVhdGVQb2ludCA9IGZ1bmN0aW9uIGNyZWF0ZVBvaW50KFxuICB4OiBudW1iZXIgfCBET01Qb2ludCxcbiAgeT86IG51bWJlcixcbikge1xuICBpZiAoeCBpbnN0YW5jZW9mIERPTVBvaW50KSB7XG4gICAgcmV0dXJuIERPTVBvaW50LmZyb21Qb2ludCh4KTtcbiAgfVxuXG4gIHJldHVybiBuZXcgRE9NUG9pbnQoeCwgeSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVQb2ludDtcbiIsImVudW0gRXZlbnQge1xuICBzcGluU3RhcnQgPSAnc3BpbnN0YXJ0JyxcbiAgc3Bpbm5pbmcgPSAnc3Bpbm5pbmcnLFxuICBzcGluRW5kID0gJ3NwaW5lbmQnLFxuICBjaGFuZ2UgPSAnY2hhbmdlJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgRXZlbnQ7XG4iLCJpbXBvcnQgeyBjcmVhdGVQb2ludCB9IGZyb20gJy4uL3R5cGVzL1BvaW50JztcblxuZXhwb3J0IHR5cGUgVG91Y2hMaWtlRXZlbnQgPSBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCB8IFBvaW50ZXJFdmVudDtcblxuLyoqXG4gKiBSZXR1cm5zICh4LCB5KSBvZiBtb3VzdC90b3VjaCBldmVudC5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRYWShldmVudDogVG91Y2hMaWtlRXZlbnQpOiBET01Qb2ludCB7XG4gIGlmIChldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcbiAgICBjb25zdCB7IHRvdWNoZXMgfSA9IGV2ZW50O1xuICAgIGNvbnN0IHRvdWNoID0gdG91Y2hlcy5pdGVtKDApO1xuICAgIGNvbnN0IHtcbiAgICAgIGNsaWVudFggPSAwLFxuICAgICAgY2xpZW50WSA9IDAsXG4gICAgfSA9IHRvdWNoID8/IHt9O1xuXG4gICAgcmV0dXJuIGNyZWF0ZVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICB9XG5cbiAgY29uc3QgeyBjbGllbnRYLCBjbGllbnRZIH0gPSBldmVudDtcblxuICByZXR1cm4gY3JlYXRlUG9pbnQoY2xpZW50WCwgY2xpZW50WSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldEV2ZW50WFk7XG4iLCJpbXBvcnQgY3JlYXRlUG9pbnQgZnJvbSAnLi4vdHlwZXMvUG9pbnQnO1xuXG5jb25zdCB7IFBJLCBoeXBvdCwgYXNpbiB9ID0gTWF0aDtcbmNvbnN0IG9yaWdpbkRPTVBvaW50OiBET01Qb2ludCA9IGNyZWF0ZVBvaW50KDAsIDApO1xuXG50eXBlIFF1YWRyYW50ID0gMSB8IDIgfCAzIHwgNDtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBxdWFkcmFudCBbMSwgNF0gb2YgcG9pbnQgZnJvbSBjZW50ZXIuIFRoZSB2YWx1ZVxuICogaXMgYmFzZWQgb24gcmFkaXVzOiBRMSA9IFswLCBQSSAvIDIpLCBRMiA9IFtQSSAvIDIsIFBJKSxcbiAqIFEzID0gW1BJLCAoMyAqIFBJKSAvIDIpLCBRNCA9IFsoMyAqIFBJKSAvIDIsIDIgKiBQSSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWFkcmFudChcbiAgcG9pbnQ6IERPTVBvaW50LFxuICBjZW50ZXI6IERPTVBvaW50ID0gb3JpZ2luRE9NUG9pbnQsXG4pOiBRdWFkcmFudCB7XG4gIGlmIChwb2ludC55IDwgY2VudGVyLnkpIHtcbiAgICByZXR1cm4gcG9pbnQueCA+IGNlbnRlci54ID8gMSA6IDI7XG4gIH1cbiAgaWYgKHBvaW50LnggPCBjZW50ZXIueCkge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcmV0dXJuIHBvaW50LnkgPiBjZW50ZXIueSA/IDQgOiAxO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHJhZGl1cyB2YWx1ZSBzdGFydGluZyBmcm9tIHRoZSBxdWFkcmFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJhZGl1c09mUXVhZHJhbnQoXG4gIHBvaW50OiBET01Qb2ludCxcbiAgY2VudGVyOiBET01Qb2ludCA9IG9yaWdpbkRPTVBvaW50LFxuICBxdWFkcmFudCA9IGdldFF1YWRyYW50KHBvaW50LCBjZW50ZXIpLFxuKTogbnVtYmVyIHtcbiAgY29uc3QgZGlmZlggPSBwb2ludC54IC0gY2VudGVyLng7XG4gIGNvbnN0IGRpZmZZID0gcG9pbnQueSAtIGNlbnRlci55O1xuICBjb25zdCBsZW5ndGggPSBoeXBvdChkaWZmWCwgZGlmZlkpO1xuXG4gIHN3aXRjaCAocXVhZHJhbnQpIHtcbiAgICBkZWZhdWx0OlxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBhc2luKC1kaWZmWSAvIGxlbmd0aCk7XG5cbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gYXNpbigtZGlmZlggLyBsZW5ndGgpO1xuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIGFzaW4oZGlmZlkgLyBsZW5ndGgpO1xuXG4gICAgY2FzZSA0OlxuICAgICAgcmV0dXJuIGFzaW4oZGlmZlggLyBsZW5ndGgpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBwb3NpdGl2ZSB2YWx1ZSBmb3IgY2xvY2t3aXNlLCBuZWdhdGl2ZSB2YWx1ZSBmb3JcbiAqIGNvdW50ZXJjbG9ja3dpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREaWZmUmFkaXVzKFxuICBsYXN0UXVhZHJhbnQ6IFF1YWRyYW50LFxuICBsYXN0UmFkaXVzOiBudW1iZXIsXG4gIG5leHRRdWFkcmFudDogUXVhZHJhbnQsXG4gIG5leHRSYWRpdXM6IG51bWJlcixcbik6IG51bWJlciB7XG4gIHN3aXRjaCAobmV4dFF1YWRyYW50IC0gbGFzdFF1YWRyYW50KSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIDA6XG4gICAgICAvLyB0aGUgc2FtZSBxdWFkcmFudFxuICAgICAgcmV0dXJuIGxhc3RSYWRpdXMgLSBuZXh0UmFkaXVzO1xuXG4gICAgY2FzZSAtMzpcbiAgICBjYXNlIDE6XG4gICAgICAvLyB0byB0aGUgbmV4dCBxdWFkcmFudFxuICAgICAgcmV0dXJuIGxhc3RSYWRpdXMgLSBuZXh0UmFkaXVzIC0gUEkgLyAyO1xuXG4gICAgY2FzZSAtMTpcbiAgICBjYXNlIDM6XG4gICAgICAvLyB0byB0aGUgcHJldiBxdWFkcmFudFxuICAgICAgcmV0dXJuIGxhc3RSYWRpdXMgLSBuZXh0UmFkaXVzICsgUEkgLyAyO1xuXG4gICAgY2FzZSAtMjpcbiAgICBjYXNlIDI6IHtcbiAgICAgIC8vIHRvIHRoZSBkaWFnb25hbCBxdWFkcmFudFxuICAgICAgY29uc3QgcmFkaXVzID0gbGFzdFJhZGl1cyArIFBJIC0gbmV4dFJhZGl1cztcblxuICAgICAgcmV0dXJuIHJhZGl1cyA+IFBJID8gMiAqIFBJIC0gcmFkaXVzIDogcmFkaXVzO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIHJhZGl1cyB0byBkZWdyZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFkaXVzVG9EZWdyZWUocmFkaXVzOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gMTgwICogKHJhZGl1cyAvIFBJKTtcbn1cbiIsImltcG9ydCBLbm9iIGZyb20gJy4uL2tub2InO1xuaW1wb3J0IGNyZWF0ZVBvaW50IGZyb20gJy4uL3R5cGVzL1BvaW50JztcbmltcG9ydCBFdmVudCBmcm9tICcuLi92YWx1ZXMvZXZlbnQnO1xuaW1wb3J0IHsgYWRkRXZlbnRMaXN0ZW5lcnMsIHJlbW92ZUV2ZW50TGlzdGVuZXJzLCB0cmlnZ2VyRXZlbnQgfSBmcm9tICcuL2V2ZW50SGFuZGxlcic7XG5pbXBvcnQgZ2V0RXZlbnRYWSwgeyBUb3VjaExpa2VFdmVudCB9IGZyb20gJy4vZ2V0RXZlbnRYWSc7XG5pbXBvcnQge1xuICBnZXREaWZmUmFkaXVzLCBnZXRRdWFkcmFudCwgZ2V0UmFkaXVzT2ZRdWFkcmFudCwgcmFkaXVzVG9EZWdyZWUsXG59IGZyb20gJy4vcmFkaXVzQW5kRGVncmVlJztcblxuY29uc3QgRVZFTlRfVE9VQ0hfU1RBUlQgPSBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J107XG5jb25zdCBFVkVOVF9UT1VDSF9NT1ZFID0gWydtb3VzZW1vdmUnLCAndG91Y2htb3ZlJ107XG5jb25zdCBFVkVOVF9UT1VDSF9FTkQgPSBbJ21vdXNldXAnLCAndG91Y2hlbmQnXTtcblxuZXhwb3J0IGludGVyZmFjZSBTcGluRXZlbnREZXRhaWwge1xuICBkZWdyZWU6IG51bWJlcjtcbiAgbGFzdERlZ3JlZTogbnVtYmVyO1xuICBvZmZzZXREZWdyZWU6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIHNwaW5zdGFydCBldmVudCBiaW5kZWQgd2l0aCBtb3VzZXN0YXJ0L3RvdWNoc3RhcnRcbiAqIGV2ZW50cy5cbiAqL1xuZnVuY3Rpb24gc3BpblN0YXJ0TGlzdGVuZXIoXG4gIHRoaXM6IEtub2IsXG4gIGV2ZW50OiBUb3VjaExpa2VFdmVudCxcbik6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZGVncmVlOiBzdGFydERlZ3JlZSxcbiAgfSA9IHRoaXM7XG4gIGNvbnN0IHBhc3NlZFN0YXJ0RXZlbnQgPSB0cmlnZ2VyRXZlbnQ8U3BpbkV2ZW50RGV0YWlsPihcbiAgICB0aGlzLFxuICAgIEV2ZW50LnNwaW5TdGFydCxcbiAgICB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGRlZ3JlZTogc3RhcnREZWdyZWUsXG4gICAgICAgIGxhc3REZWdyZWU6IHN0YXJ0RGVncmVlLFxuICAgICAgICBvZmZzZXREZWdyZWU6IDAsXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG5cbiAgaWYgKCFwYXNzZWRTdGFydEV2ZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCxcbiAgfSA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGNlbnRlciA9IGNyZWF0ZVBvaW50KFxuICAgIChyaWdodCArIGxlZnQpIC8gMixcbiAgICAodG9wICsgYm90dG9tKSAvIDIsXG4gICk7XG4gIGNvbnN0IHN0YXJ0UHJlc3NQb2ludCA9IGdldEV2ZW50WFkoZXZlbnQpO1xuICBjb25zdCBzdGFydFByZXNzUXVhZHJhbnQgPSBnZXRRdWFkcmFudChcbiAgICBzdGFydFByZXNzUG9pbnQsXG4gICAgY2VudGVyLFxuICApO1xuICBjb25zdCBzdGFydFByZXNzUmFkaXVzID0gZ2V0UmFkaXVzT2ZRdWFkcmFudChcbiAgICBzdGFydFByZXNzUG9pbnQsXG4gICAgY2VudGVyLFxuICAgIHN0YXJ0UHJlc3NRdWFkcmFudCxcbiAgKTtcblxuICBsZXQgdG90YWxEaWZmRGVncmVlID0gMDtcbiAgbGV0IGxhc3RRdWFkcmFudCA9IHN0YXJ0UHJlc3NRdWFkcmFudDtcbiAgbGV0IGxhc3RSYWRpdXMgPSBzdGFydFByZXNzUmFkaXVzO1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHNwaW5uaW5nL2NoYW5naW5nIGV2ZW50cyBiaW5kZWQgd2l0aFxuICAgKiBtb3VzZW1vdmUvdG91Y2htb3ZlIGV2ZW50cy5cbiAgICovXG4gIGNvbnN0IHNwaW5uaW5nTGlzdGVuZXIgPSAoZXZ0OiBUb3VjaExpa2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IHByZXNzUG9pbnQgPSBnZXRFdmVudFhZKGV2dCk7XG4gICAgY29uc3QgcHJlc3NRdWFkcmFudCA9IGdldFF1YWRyYW50KFxuICAgICAgcHJlc3NQb2ludCxcbiAgICAgIGNlbnRlcixcbiAgICApO1xuICAgIGNvbnN0IHByZXNzUmFkaXVzID0gZ2V0UmFkaXVzT2ZRdWFkcmFudChcbiAgICAgIHByZXNzUG9pbnQsXG4gICAgICBjZW50ZXIsXG4gICAgICBwcmVzc1F1YWRyYW50LFxuICAgICk7XG4gICAgY29uc3QgZGlmZlJhZGl1cyA9IGdldERpZmZSYWRpdXMoXG4gICAgICBsYXN0UXVhZHJhbnQsXG4gICAgICBsYXN0UmFkaXVzLFxuICAgICAgcHJlc3NRdWFkcmFudCxcbiAgICAgIHByZXNzUmFkaXVzLFxuICAgICk7XG4gICAgY29uc3QgZGlmZkRlZ3JlZSA9IHJhZGl1c1RvRGVncmVlKGRpZmZSYWRpdXMpO1xuICAgIGNvbnN0IHtcbiAgICAgIGRlZ3JlZTogbGFzdERlZ3JlZSxcbiAgICB9ID0gdGhpcztcblxuICAgIHRvdGFsRGlmZkRlZ3JlZSArPSBkaWZmRGVncmVlO1xuXG4gICAgY29uc3QgbmV4dERlZ3JlZSA9IHN0YXJ0RGVncmVlICsgdG90YWxEaWZmRGVncmVlO1xuICAgIGNvbnN0IHBhc3NlZE1vdmVFdmVudCA9IHRyaWdnZXJFdmVudDxTcGluRXZlbnREZXRhaWw+KFxuICAgICAgdGhpcyxcbiAgICAgIEV2ZW50LnNwaW5uaW5nLFxuICAgICAge1xuICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgZGVncmVlOiBuZXh0RGVncmVlLFxuICAgICAgICAgIGxhc3REZWdyZWUsXG4gICAgICAgICAgb2Zmc2V0RGVncmVlOiB0b3RhbERpZmZEZWdyZWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICk7XG5cbiAgICBsYXN0UXVhZHJhbnQgPSBwcmVzc1F1YWRyYW50O1xuICAgIGxhc3RSYWRpdXMgPSBwcmVzc1JhZGl1cztcblxuICAgIGlmICghcGFzc2VkTW92ZUV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kZWdyZWUgPSBuZXh0RGVncmVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHNwaW5lbmQvY2hhbmdlZCBldmVudHMgYmluZGVkIHdpdGggbW91c2V1cC90b3VjaGVuZFxuICAgKiBldmVudHMuXG4gICAqL1xuICBjb25zdCBzcGluRW5kTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBkZWdyZWUgfSA9IHRoaXM7XG5cbiAgICByZW1vdmVFdmVudExpc3RlbmVycyhkb2N1bWVudCwgRVZFTlRfVE9VQ0hfTU9WRSwgc3Bpbm5pbmdMaXN0ZW5lcik7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZG9jdW1lbnQsIEVWRU5UX1RPVUNIX0VORCwgc3BpbkVuZExpc3RlbmVyKTtcbiAgICB0cmlnZ2VyRXZlbnQ8U3BpbkV2ZW50RGV0YWlsPihcbiAgICAgIHRoaXMsXG4gICAgICBFdmVudC5zcGluRW5kLFxuICAgICAge1xuICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcbiAgICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGRlZ3JlZSxcbiAgICAgICAgICBsYXN0RGVncmVlOiBzdGFydERlZ3JlZSxcbiAgICAgICAgICBvZmZzZXREZWdyZWU6IHRvdGFsRGlmZkRlZ3JlZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgKTtcbiAgfTtcblxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBhZGRFdmVudExpc3RlbmVycyhkb2N1bWVudCwgRVZFTlRfVE9VQ0hfTU9WRSwgc3Bpbm5pbmdMaXN0ZW5lcik7XG4gIGFkZEV2ZW50TGlzdGVuZXJzKGRvY3VtZW50LCBFVkVOVF9UT1VDSF9FTkQsIHNwaW5FbmRMaXN0ZW5lcik7XG59XG5cbi8qKlxuICogQWRkcyBsaXN0ZW5lcnMgb2YgS25vYi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNwaW5MaXN0ZW5lcnMocmVmOiBLbm9iKTogdm9pZCB7XG4gIGFkZEV2ZW50TGlzdGVuZXJzKHJlZiwgRVZFTlRfVE9VQ0hfU1RBUlQsIHNwaW5TdGFydExpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGxpc3RlbmVycyBvZiBLbm9iLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU3Bpbkxpc3RlbmVycyhyZWY6IEtub2IpOiB2b2lkIHtcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMocmVmLCBFVkVOVF9UT1VDSF9TVEFSVCwgc3BpblN0YXJ0TGlzdGVuZXIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzcGluU3RhcnRMaXN0ZW5lcjtcbiIsImVudW0gQXR0cmlidXRlIHtcbiAgZGlzYWJsZWQgPSAnZGlzYWJsZWQnLFxuICBkZWdyZWUgPSAnZGVncmVlJyxcbiAgbWluID0gJ21pbicsXG4gIG1heCA9ICdtYXgnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBBdHRyaWJ1dGU7XG4iLCJlbnVtIFN0eWxlIHtcbiAgZGVncmVlID0gJy0tZGVncmVlJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3R5bGU7XG4iLCJpbXBvcnQgeyB0cmlnZ2VyRXZlbnQgfSBmcm9tICcuL3V0aWxzL2V2ZW50SGFuZGxlcic7XG5pbXBvcnQgcmVnaXN0ZXJFbGVtZW50IGZyb20gJy4vdXRpbHMvcmVnaXN0ZXJFbGVtZW50JztcbmltcG9ydCB7XG4gIGFkZFNwaW5MaXN0ZW5lcnMsIHJlbW92ZVNwaW5MaXN0ZW5lcnMsIFNwaW5FdmVudERldGFpbCxcbn0gZnJvbSAnLi91dGlscy9zcGluTGlzdGVuZXInO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL3ZhbHVlcy9hdHRyaWJ1dGUnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vdmFsdWVzL2V2ZW50JztcbmltcG9ydCBTdHlsZSBmcm9tICcuL3ZhbHVlcy9zdHlsZSc7XG5cbmNvbnN0IG5vZGVOYW1lID0gJ2tub2ItYmFzZSc7XG5cbmNvbnN0IHsgaXNOYU4gfSA9IGdsb2JhbFRoaXM7XG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0QXR0cmlidXRlVmFsdWVzID0ge1xuICBbQXR0cmlidXRlLmRlZ3JlZV06IDAsXG4gIFtBdHRyaWJ1dGUubWluXTogLUluZmluaXR5LFxuICBbQXR0cmlidXRlLm1heF06IEluZmluaXR5LFxufTtcblxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdG91Y2gtYWN0aW9uOiBub25lO1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgdmVydGljYWwtYWxpZ246IHRleHQtYm90dG9tO1xuICAgIH1cblxuICAgIGtub2Ige1xuICAgICAgdHJhbnNpdGlvbjogaW5oZXJpdDtcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKHZhcigke1N0eWxlLmRlZ3JlZX0pKTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICA8L3N0eWxlPlxuICA8a25vYj5cbiAgICA8c2xvdD48L3Nsb3Q+XG4gICAgPGNvdmVyPlxuICAgICAgPHNsb3QgbmFtZT1cInBvaW50ZXJcIj48L3Nsb3Q+XG4gICAgPC9jb3Zlcj5cbiAgPC9rbm9iPlxuYDtcblxuY2xhc3MgS25vYiBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgcHJvdGVjdGVkIGtub2JFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgc2hhZG93Um9vdC5hcHBlbmQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHRoaXMua25vYkVsZW1lbnQgPSBzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2tub2InKSBhcyBIVE1MRWxlbWVudDtcbiAgICBLbm9iLm9ic2VydmVkQXR0cmlidXRlcy5mb3JFYWNoKChhdHRyTmFtZSkgPT4ge1xuICAgICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ck5hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIEF0dHJpYnV0ZS5kaXNhYmxlZCxcbiAgICAgIEF0dHJpYnV0ZS5taW4sXG4gICAgICBBdHRyaWJ1dGUubWF4LFxuICAgICAgQXR0cmlidXRlLmRlZ3JlZSxcbiAgICBdO1xuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJOYW1lOiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKGF0dHJOYW1lKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGUuZGlzYWJsZWQ6XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0aGlzLmhhc0F0dHJpYnV0ZShBdHRyaWJ1dGUuZGlzYWJsZWQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGUubWluOiB7XG4gICAgICAgIGNvbnN0IG1pbiA9IE51bWJlcihcbiAgICAgICAgICB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUubWluKVxuICAgICAgICAgID8/IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbQXR0cmlidXRlLm1pbl0sXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5taW4gPSBtaW47XG4gICAgICAgIHRoaXMuZGVncmVlID0gTWF0aC5tYXgobWluLCB0aGlzLmRlZ3JlZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIEF0dHJpYnV0ZS5tYXg6IHtcbiAgICAgICAgY29uc3QgbWF4ID0gTnVtYmVyKFxuICAgICAgICAgIHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5tYXgpXG4gICAgICAgICAgPz8gZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1tBdHRyaWJ1dGUubWF4XSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm1heCA9IG1heDtcbiAgICAgICAgdGhpcy5kZWdyZWUgPSBNYXRoLm1pbihtYXgsIHRoaXMuZGVncmVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlLmRlZ3JlZTpcbiAgICAgICAgdGhpcy5kZWdyZWUgPSBOdW1iZXIoXG4gICAgICAgICAgdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmRlZ3JlZSlcbiAgICAgICAgICA/PyBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5kZWdyZWVdLFxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIEtub2IgaXMgZGlzYWJsZWQuXG4gICAqL1xuICBnZXQgZGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKEF0dHJpYnV0ZS5kaXNhYmxlZCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBLbm9iIGRpc2FibGVkLlxuICAgKi9cbiAgc2V0IGRpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICByZW1vdmVTcGluTGlzdGVuZXJzKHRoaXMpO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmRpc2FibGVkLCAnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZFNwaW5MaXN0ZW5lcnModGhpcyk7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGUuZGlzYWJsZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1pbiBkZWdyZWUuXG4gICAqL1xuICBnZXQgbWluKCk6IG51bWJlciB7XG4gICAgY29uc3QgbWluID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLm1pbik7XG5cbiAgICByZXR1cm4gKG1pbiA9PT0gbnVsbFxuICAgICAgPyBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5taW5dXG4gICAgICA6IE51bWJlcihtaW4pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIG1pbiBkZWdyZWUuXG4gICAqL1xuICBzZXQgbWluKG1pbjogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKG1pbikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbWluIGRlZ3JlZTogJHttaW59YCk7XG4gICAgfVxuICAgIGlmIChtaW4gPT09IHRoaXMubWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLm1pbiwgYCR7bWlufWApO1xuXG4gICAgaWYgKHRoaXMubWF4IDwgbWluKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgJ1NldHRpbmcgbWluIGRlZ3JlZSB0aGF0IGlzIGdyZWF0ZXIgdGhhbiBtYXggZGVncmVlIG1pZ2h0IGNhdXNlIHNwaW5uaW5nIGVycm9yJyxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgbWF4IGRlZ3JlZS5cbiAgICovXG4gIGdldCBtYXgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBtYXggPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUubWF4KTtcblxuICAgIHJldHVybiAobWF4ID09PSBudWxsXG4gICAgICA/IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbQXR0cmlidXRlLm1heF1cbiAgICAgIDogTnVtYmVyKG1heClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgbWF4IGRlZ3JlZS5cbiAgICovXG4gIHNldCBtYXgobWF4OiBudW1iZXIpIHtcbiAgICBpZiAoaXNOYU4obWF4KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtYXggZGVncmVlOiAke21heH1gKTtcbiAgICB9XG4gICAgaWYgKG1heCA9PT0gdGhpcy5tYXgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGUubWF4LCBgJHttYXh9YCk7XG5cbiAgICBpZiAodGhpcy5taW4gPiBtYXgpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFxuICAgICAgICAnU2V0dGluZyBtYXggZGVncmVlIHRoYXQgaXMgbGVzcyB0aGFuIG1pbiBkZWdyZWUgbWlnaHQgY2F1c2Ugc3Bpbm5pbmcgZXJyb3InLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBkZWdyZWUuXG4gICAqL1xuICBnZXQgZGVncmVlKCk6IG51bWJlciB7XG4gICAgY29uc3QgZGVncmVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmRlZ3JlZSk7XG5cbiAgICByZXR1cm4gKGRlZ3JlZSA9PT0gbnVsbFxuICAgICAgPyBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5kZWdyZWVdXG4gICAgICA6IE51bWJlcihkZWdyZWUpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGRlZ3JlZS5cbiAgICovXG4gIHNldCBkZWdyZWUoZGVncmVlOiBudW1iZXIpIHtcbiAgICBpZiAoaXNOYU4oZGVncmVlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBkZWdyZWU6ICR7ZGVncmVlfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIGRlZ3JlZTogbGFzdERlZ3JlZSxcbiAgICAgIG1pbixcbiAgICAgIG1heCxcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBuZXdEZWdyZWUgPSBNYXRoLm1heChcbiAgICAgIG1pbixcbiAgICAgIE1hdGgubWluKGRlZ3JlZSwgbWF4KSxcbiAgICApO1xuXG4gICAgaWYgKG5ld0RlZ3JlZSA9PT0gbGFzdERlZ3JlZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMua25vYkVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoU3R5bGUuZGVncmVlLCBgJHtuZXdEZWdyZWV9ZGVnYCk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmRlZ3JlZSwgYCR7bmV3RGVncmVlfWApO1xuICAgIHRyaWdnZXJFdmVudDxTcGluRXZlbnREZXRhaWw+KHRoaXMsIEV2ZW50LmNoYW5nZSwge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZGVncmVlOiBuZXdEZWdyZWUsXG4gICAgICAgIGxhc3REZWdyZWUsXG4gICAgICAgIG9mZnNldERlZ3JlZTogbmV3RGVncmVlIC0gbGFzdERlZ3JlZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWxpYXMgb2YgZ2V0dGluZyBkZWdyZWUuXG4gICAqL1xuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVncmVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIG9mIHNldHRpbmcgZGVncmVlLlxuICAgKi9cbiAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5kZWdyZWUgPSB2YWx1ZTtcbiAgfVxufVxuXG5yZWdpc3RlckVsZW1lbnQoS25vYiwgbm9kZU5hbWUpO1xuXG5leHBvcnQgZGVmYXVsdCBLbm9iO1xuIiwiaW1wb3J0IEtub2IgZnJvbSAnLi4va25vYic7XG5cbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgLS1zaXplOiA4MHB4O1xuICAgICAgXG4gICAgICB3aWR0aDogdmFyKC0tc2l6ZSk7XG4gICAgICBoZWlnaHQ6IHZhcigtLXNpemUpO1xuICAgIH1cblxuICAgIGtub2Ige1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGN1cnJlbnRDb2xvcjtcbiAgICAgIGJhY2tncm91bmQ6ICNmM2YzZjM7XG4gICAgICBjb2xvcjogI2FhYTtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuXG4gICAga25vYjpob3ZlcixcbiAgICBrbm9iOmFjdGl2ZSB7XG4gICAgICBjb2xvcjogIzg4ODtcbiAgICAgIGJhY2tncm91bmQ6ICNlZWU7XG4gICAgfVxuXG4gICAgY292ZXIge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICBsZWZ0OiAwO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIHotaW5kZXg6IDE7XG4gICAgfVxuXG4gICAgc2xvdFtuYW1lPXBvaW50ZXJdIHtcbiAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuXG4gICAgOjpzbG90dGVkKFtzbG90PXBvaW50ZXJdKSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIGtub2IgPiBzbG90IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogNTAlO1xuICAgICAgbGVmdDogNTAlO1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gIDwvc3R5bGU+XG5gO1xuXG5jbGFzcyBLbm9iQmFzZSBleHRlbmRzIEtub2Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgKHRoaXMuc2hhZG93Um9vdCBhcyBTaGFkb3dSb290KVxuICAgICAgLmFwcGVuZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgS25vYkJhc2U7XG4iLCJpbXBvcnQgS25vYkJhc2UgZnJvbSAnLi9iYXNpYyc7XG5pbXBvcnQgcmVnaXN0ZXJFbGVtZW50IGZyb20gJy4uL3V0aWxzL3JlZ2lzdGVyRWxlbWVudCc7XG5cbmNvbnN0IG5vZGVOYW1lID0gJ2tub2ItZG90JztcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgc2xvdFtuYW1lPXBvaW50ZXJdIHtcbiAgICAgIG1hcmdpbi10b3A6IDUlO1xuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgd2lkdGg6IDEwJTtcbiAgICAgIGhlaWdodDogMTAlO1xuICAgICAgYmFja2dyb3VuZDogY3VycmVudENvbG9yO1xuICAgIH1cbiAgPC9zdHlsZT5cbmA7XG5cbmNsYXNzIEtub2JEb3QgZXh0ZW5kcyBLbm9iQmFzZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAodGhpcy5zaGFkb3dSb290IGFzIFNoYWRvd1Jvb3QpXG4gICAgICAuYXBwZW5kKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxufVxuXG5yZWdpc3RlckVsZW1lbnQoS25vYkRvdCwgbm9kZU5hbWUpO1xuXG5leHBvcnQgZGVmYXVsdCBLbm9iRG90O1xuIiwiaW1wb3J0IEtub2JCYXNlIGZyb20gJy4vYmFzaWMnO1xuaW1wb3J0IHJlZ2lzdGVyRWxlbWVudCBmcm9tICcuLi91dGlscy9yZWdpc3RlckVsZW1lbnQnO1xuXG5jb25zdCBub2RlTmFtZSA9ICdrbm9iLXRyaWFuZ2xlJztcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgc2xvdFtuYW1lPXBvaW50ZXJdIHtcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbiAgICAgIG1hcmdpbi10b3A6IDUlO1xuICAgICAgd2lkdGg6IDEwJTtcbiAgICAgIGhlaWdodDogMTAlO1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KFxuICAgICAgICAxMzVkZWcsXG4gICAgICAgIGN1cnJlbnRDb2xvciA1MCUsXG4gICAgICAgIHRyYW5zcGFyZW50IDUwJVxuICAgICAgKTtcbiAgICB9XG4gIDwvc3R5bGU+XG5gO1xuXG5jbGFzcyBLbm9iVHJpYW5nbGUgZXh0ZW5kcyBLbm9iQmFzZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAodGhpcy5zaGFkb3dSb290IGFzIFNoYWRvd1Jvb3QpXG4gICAgICAuYXBwZW5kKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxufVxuXG5yZWdpc3RlckVsZW1lbnQoS25vYlRyaWFuZ2xlLCBub2RlTmFtZSk7XG5cbmV4cG9ydCBkZWZhdWx0IEtub2JUcmlhbmdsZTtcbiIsImltcG9ydCBLbm9iQmFzZSBmcm9tICcuL2Jhc2ljJztcbmltcG9ydCByZWdpc3RlckVsZW1lbnQgZnJvbSAnLi4vdXRpbHMvcmVnaXN0ZXJFbGVtZW50JztcblxuY29uc3Qgbm9kZU5hbWUgPSAna25vYi1saW5lJztcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgc2xvdFtuYW1lPXBvaW50ZXJdIHtcbiAgICAgIHdpZHRoOiAzJTtcbiAgICAgIGhlaWdodDogMTUlO1xuICAgICAgYmFja2dyb3VuZDogY3VycmVudENvbG9yO1xuICAgIH1cbiAgPC9zdHlsZT5cbmA7XG5cbmNsYXNzIEtub2JMaW5lIGV4dGVuZHMgS25vYkJhc2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgKHRoaXMuc2hhZG93Um9vdCBhcyBTaGFkb3dSb290KVxuICAgICAgLmFwcGVuZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cbn1cblxucmVnaXN0ZXJFbGVtZW50KEtub2JMaW5lLCBub2RlTmFtZSk7XG5cbmV4cG9ydCBkZWZhdWx0IEtub2JMaW5lO1xuIl0sIm5hbWVzIjpbImFkZEV2ZW50TGlzdGVuZXJzIiwicmVmIiwidHlwZXMiLCJsaXN0ZW5lciIsIm9wdGlvbnMiLCJmb3JFYWNoIiwidHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0cmlnZ2VyRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJOb2RlIiwibm9kZU5hbWUiLCJjdXN0b21FbGVtZW50cyIsImdldCIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsImRlZmluZSIsIndoZW5EZWZpbmVkIiwiY3JlYXRlUG9pbnQiLCJ4IiwieSIsIkRPTVBvaW50IiwiZnJvbVBvaW50IiwiRXZlbnQiLCJldmVudCIsIlRvdWNoRXZlbnQiLCJ0b3VjaGVzIiwidG91Y2giLCJpdGVtIiwiY2xpZW50WCIsImNsaWVudFkiLCJQSSIsImh5cG90IiwiYXNpbiIsIk1hdGgiLCJvcmlnaW5ET01Qb2ludCIsImdldFF1YWRyYW50IiwicG9pbnQiLCJjZW50ZXIiLCJnZXRSYWRpdXNPZlF1YWRyYW50IiwicXVhZHJhbnQiLCJkaWZmWCIsImRpZmZZIiwibGVuZ3RoIiwiRVZFTlRfVE9VQ0hfU1RBUlQiLCJFVkVOVF9UT1VDSF9NT1ZFIiwiRVZFTlRfVE9VQ0hfRU5EIiwic3BpblN0YXJ0TGlzdGVuZXIiLCJkZWdyZWUiLCJzdGFydERlZ3JlZSIsInRoaXMiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNvbXBvc2VkIiwiZGV0YWlsIiwibGFzdERlZ3JlZSIsIm9mZnNldERlZ3JlZSIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInN0YXJ0UHJlc3NQb2ludCIsImdldEV2ZW50WFkiLCJzdGFydFByZXNzUXVhZHJhbnQiLCJzdGFydFByZXNzUmFkaXVzIiwidG90YWxEaWZmRGVncmVlIiwibGFzdFF1YWRyYW50IiwibGFzdFJhZGl1cyIsInNwaW5uaW5nTGlzdGVuZXIiLCJldnQiLCJwcmVzc1BvaW50IiwicHJlc3NRdWFkcmFudCIsInByZXNzUmFkaXVzIiwiZGlmZkRlZ3JlZSIsIm5leHRRdWFkcmFudCIsIm5leHRSYWRpdXMiLCJyYWRpdXMiLCJnZXREaWZmUmFkaXVzIiwibmV4dERlZ3JlZSIsInBhc3NlZE1vdmVFdmVudCIsInNwaW5FbmRMaXN0ZW5lciIsImRvY3VtZW50IiwicHJldmVudERlZmF1bHQiLCJBdHRyaWJ1dGUiLCJTdHlsZSIsImlzTmFOIiwiZ2xvYmFsVGhpcyIsInRlbXBsYXRlIiwiY3JlYXRlRWxlbWVudCIsImRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMiLCJJbmZpbml0eSIsImlubmVySFRNTCIsIktub2IiLCJIVE1MRWxlbWVudCIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJzaGFkb3dSb290IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImFwcGVuZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJrbm9iRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJhdHRyTmFtZSIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsImRpc2FibGVkIiwiaGFzQXR0cmlidXRlIiwibWluIiwiTnVtYmVyIiwiZ2V0QXR0cmlidXRlIiwibWF4Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiVHlwZUVycm9yIiwiUmFuZ2VFcnJvciIsIm5ld0RlZ3JlZSIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJ2YWx1ZSIsInJlZ2lzdGVyRWxlbWVudCIsIktub2JCYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==