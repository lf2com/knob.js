!function o(a,s,u){function f(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return f(a[t][1][e]||e)},i,i.exports,o,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)f(u[e]);return f}({1:[function(e,t,n){"use strict";var r,i=e("./libs/knob"),o=(r=i)&&r.__esModule?r:{default:r};t.exports=o.default,self&&self instanceof Object&&self===self.self&&(self.Knob=o.default)},{"./libs/knob":3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=e("./stdlib"),r=function(e){if((0,v.isstr)(e))e=e.split(" ");else if(!(0,v.isarray)(e))throw new Error("Invalid names: "+(0,v.tostr)(e));return e.map(function(e){return function(e){if(!(0,v.isstr)(e))throw new Error("Invalid name: "+(0,v.tostr)(e));var t=e.split("."),n=g(t,2),r=n[0],i=n[1];if(!(0,v.isset)(r))throw new Error("Illegal name: "+(0,v.tostr)(e));return[r,i]}(e)})};function a(e){if(!this instanceof a)return new(Function.prototype.bind.apply(a,[null].concat(Array.prototype.slice.call(arguments))));Object.defineProperties(this,{ref:{value:e},dom:{value:(0,v.iselem)(e)?e:document.createElement("eh")},events:{value:{}}})}["on","off","trigger"].forEach(function(o){a[o]=function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e instanceof a)e[o].apply(e,r);else if(!(0,v.iselem)(e))throw new Error("Invalid element: "+(0,v.tostr)(e));return e._eventHandler=(t=e._eventHandler||new a(e))[o].apply(t,r),a}}),a.prototype.on=function(e,i){var o=this;return i=function(e){if((0,v.isfunc)(e))return[e];if(!(0,v.isarray)(e))throw new Error("Invalid funcs: "+(0,v.tostr)(e));return e.map(function(e){if(!(0,v.isfunc)(e))throw new Error("Invaqlid func: "+(0,v.tostr)(e));return e})}(i),(0,v.isset)(this.ref)&&(i=i.map(function(e){return e.bind(o.ref)})),r(e).forEach(function(e){var t=g(e,2),n=t[0],r=t[1];i.forEach(function(e){return o.dom.addEventListener(n,e)}),o.events[n]=(o.events[n]||[]).concat(i.map(function(e){return{minor:r,func:e}}))}),this},a.prototype.off=function(e){var u=this;return r(e).forEach(function(e){var t=g(e,2),n=t[0],r=t[1],i=u.events[n]||[],o=[];if((0,v.isset)(r))for(var a=i.length-1;0<=a;a--){var s=i[a];r===s.minor&&(o.push(s),i.splice(a,1))}else i.splice(0,i.length).forEach(function(e){o.push(e)});o.forEach(function(e){var t=e.func;u.dom.removeEventListener(n,t)}),0===i.length&&delete u.events[n]}),this},a.prototype.trigger=function(e,c,d){var h=this;if((0,v.isset)(d)&&!(0,v.isfunc)(d))throw new Error("Invalid onPrevent function: "+(0,v.tostr)(d));return r(e).forEach(function(e){var t=g(e,2),n=t[0],r=t[1],i=!1;if((0,v.isset)(r))for(var o=!1,a=function(){return i=!0},s=function(){return o=!0},u=(h.events[n]||[]).filter(function(e){return e.minor===r}),f=0;!o&&f<u.length;f++)!1===u[f].func({detail:c,preventDefault:a,stopImmediatePropagation:s})&&(i=!0);else{var l=document.createEvent("CustomEvent");l.initCustomEvent(n,!0,!0,c),!1===h.dom.dispatchEvent(l)&&(i=!0)}i&&d&&d(n)}),this},n.default=a},{"./stdlib":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=e("./stdlib"),i=e("./event-handler"),s=(r=i)&&r.__esModule?r:{default:r};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=["mousedown","touchstart"],l=["mousemove","touchmove"],p=["mouseup","touchend"],m=["spinstart","start"],y=["spinend","end"],b=["spinning","change"],D=function(e){var t=e.clientX,n=e.clientY,r=e.touches,i=u(r=void 0===r?[]:r,1)[0],o=(i=void 0===i?{}:i).clientX,a=void 0===o?t:o,s=i.clientY;return{x:a,y:void 0===s?n:s}},w=function n(r){for(var e=arguments.length,t=Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var o=r[E.id];return t.reduce(function(e,t){return(0,a.isarray)(t)?e.concat(n.apply(void 0,[r].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)))):e.concat(t.split(" ").map(function(e){return e+"."+o}))},[])},c=function e(t){return t<0?e(t+360):360<=t?e(t-360):t},x=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=e.x-t.x,r=e.y-t.y,i=Math.hypot(n,r),o=n/i;return o=e.y<t.y?e.x<t.x?Math.PI+Math.acos(r/i):Math.asin(n/i):e.x<t.x?Math.PI+Math.asin(-n/i):Math.acos(-r/i),c(180*o/Math.PI)},E={id:"_id",dom:"_dom",eventHandler:"_eventHandler",minDeg:"_minDeg",maxDeg:"_maxDeg",fixed:"_fixed",deg:"_deg",enabled:"_enabled"},d={minDeg:-1/0,maxDeg:1/0,fixed:!1,deg:0,enabled:!1};function h(e){var t,n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this instanceof h)return new(Function.prototype.bind.apply(h,[null].concat(Array.prototype.slice.call(arguments))));if(!(0,a.iselem)(e))throw new Error("Invalid element: "+(0,a.tostr)(e));Object.defineProperties(this,(o(t={},E.id,{value:"knob_"+Date.now()+Math.random()}),o(t,E.dom,{value:e}),o(t,E.eventHandler,{value:new s.default}),o(t,E.minDeg,{value:d.minDeg,writable:!0}),o(t,E.maxDeg,{value:d.maxDeg,writable:!0}),o(t,E.fixed,{value:d.fixed,writable:!0}),o(t,E.deg,{value:d.deg,writable:!0}),o(t,E.enabled,{value:d.enabled,writable:!0}),t)),(0,a.objForEach)(r,function(e,t){return(0,a.isset)(n[t])&&n[t](e)}),this.enable()}["on","off"].forEach(function(t){h.prototype[t]=function(){var e;return(e=this[E.eventHandler])[t].apply(e,arguments),this}}),h.prototype.reset=function(){this[E.deg]=d.deg,this[E.dom].style.transform=""},h.prototype.destroy=function(){this.disable()},h.prototype.disable=function(){return s.default.off(this[E.dom],w(this,f)),this[E.enabled]=!1,this},h.prototype.enable=function(){var v=this;return this[E.enabled]||(s.default.on(this[E.dom],w(this,f),function(e){e.preventDefault();var t=e.target.getBoundingClientRect(),n=t.top,r=t.right,i=t.bottom,o=t.left,c=v[E.eventHandler],a={x:.5*(r+o),y:.5*(n+i)},d=v[E.deg],h=D(e),g=x(h,a);s.default.on(document,w(v,l),function(e){var t,n=e.target.getBoundingClientRect(),r=n.top,i=n.right,o=n.bottom,a={x:.5*(i+n.left),y:.5*(r+o)},s=D(e),u=x(s,a),f=(t=u-g,180<Math.abs(t)?t+(u<g?360:-360):t),l=M(v,v[E.deg]+f);v[E.deg]=l,h=s,g=u,c.trigger(b,{source:v[E.dom],fingerDeg:u,offsetDeg:l-d,deg:l})}),s.default.on(document,w(v,p),function(){var e=v[E.deg];s.default.off(document,w(v,l,p)),c.trigger(y,{source:v[E.dom],offsetDeg:e-d,deg:e})}),c.trigger(m,{source:v[E.dom],fingerDeg:x(h,a),offsetDeg:0,deg:d})}),this[E.enabled]=!0),this};var M=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e[E.deg];if(!(0,a.isnum)(t))throw new Error("Invalid degree: "+(0,a.tostr)(t));var n=e[E.fixed],r=e[E.minDeg],i=e[E.maxDeg];if(t=Math.min(i,Math.max(r,t)),!n){var o=e[E.dom];o.style.transformOrigin="center center",o.style.transform="rotate("+c(t)+"deg)"}return e[E.deg]=t};h.prototype.setDeg=function(e){var t=this[E.deg];return e=M(this,e),this[E.eventHandler].trigger(b,{source:this[E.dom],offsetDeg:e-t,deg:e}),this},h.prototype.getDeg=function(){return this[E.deg]},h.prototype.deg=function(e){return(0,a.isset)(e)?this.setDeg(e):this.getDeg()},h.prototype.setMinDeg=function(e){if((0,a.isset)(e)){if(!(0,a.isnum)(e))throw new Error("Invalid degree: "+(0,a.tostr)(e));if(this[E.maxDeg]<e)throw new Error("Illegal degree: "+this[E.maxDeg]+" < "+e)}else e=-1/0;return this[E.minDeg]=e,this.setDeg(),this},h.prototype.getMinDeg=function(){return this[E.minDeg]},h.prototype.minDeg=function(e){return(0,a.isset)(e)?this.setMinDeg(e):this.getMinDeg()},h.prototype.setMaxDeg=function(e){if((0,a.isset)(e)){if(!(0,a.isnum)(e))throw new Error("Invalid degree: "+(0,a.tostr)(e));if(e<this[E.minDeg])throw new Error("Illegal degree: "+e+" < "+this[E.minDeg])}else e=1/0;return this[E.maxDeg]=e,this.setDeg(),this},h.prototype.getMaxDeg=function(){return this[E.maxDeg]},h.prototype.maxDeg=function(e){return(0,a.isset)(e)?this.setMaxDeg(e):this.getMaxDeg()},h.prototype.setFixed=function(e){var t=this[E.dom];return t.style.transform="",t.style.transformOrigin="",this[E.fixed]=(0,a.tobool)(e),M(this),this},h.prototype.getFixed=function(){return this[E.fixed]},h.prototype.fixed=function(e){return(0,a.isset)(e)?this.setFixed(e):this.getFixed()},n.default=h},{"./event-handler":2,"./stdlib":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.isset=function(e){return void 0!==e},i=(n.useor=function(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:r)(e)?e:t},n.tobool=function(e){return!!e},n.isstr=function(e){return"string"==typeof e||r(e)&&e instanceof String},n.tostr=function(e){return r(e)?e.toString():""},n.isnum=function(e){return!isNaN(e)},n.isfunc=function(e){return"function"==typeof e},n.isarray=function(e){return r(e)&&Array.isArray(e)},n.objKeys=function(e){return Object.keys(e)});n.objForEach=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return i(t).forEach(function(e){return n.call(r,t[e],e,t)})},n.iselem=function(e){return r(e)&&(e instanceof Element||e instanceof Window||e instanceof Document)}},{}]},{},[1]);
